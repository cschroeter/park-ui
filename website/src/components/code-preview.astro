---
import { Code } from 'astro:components'
import { Box, type BoxProps } from 'styled-system/jsx'
import { CopyToClipboardButton } from './copy-to-clipboard-button'

type Props = {
  code: string
  isAttached?: boolean
} & BoxProps

const { code, isAttached, ...rest } = Astro.props
---

<Box
  position="relative"
  bg={{ base: 'grayPalette.50', _dark: 'grayPalette.900' }}
  borderWidth="1px"
  borderRadius="l3"
  borderTopRadius={isAttached ? '0!' : 'l3'}
  className="not-prose"
  {...rest}
>
  <Box position="absolute" right="3" top="2">
    <CopyToClipboardButton content={code} client:load />
  </Box>
  <Box maxHeight="2xs" overflow="auto" p="4">
    <Code code={code} lang="tsx" theme="css-variables" />
  </Box>
</Box>
