---
import { Code } from 'astro:components'
import fs from 'node:fs/promises'
import { CodePreview } from './code-preview'
import { CSSFrameworkTabs } from './css-framework-tabs'

const recipeName = Astro.params.slug?.split('/').pop()

const pandaRecipe = await fs
  .readFile(`../packages/presets/src/theme/recipes/${recipeName}.ts`, 'utf8')
  .catch(() => 'Not yet available')
const tailwindRecipe = await fs
  .readFile(`../packages/tailwind/src/components/${recipeName}/recipe.ts`, 'utf8')
  .catch(() => 'Not yet available')
---

<CSSFrameworkTabs client:load>
  <CodePreview code={pandaRecipe} client:load slot="panda" isAttached>
    <Code code={pandaRecipe} lang="tsx" theme="css-variables" />
  </CodePreview>
  <CodePreview code={tailwindRecipe} client:load slot="tailwind" isAttached>
    <Code code={tailwindRecipe} lang="tsx" theme="css-variables" />
  </CodePreview>
</CSSFrameworkTabs>
